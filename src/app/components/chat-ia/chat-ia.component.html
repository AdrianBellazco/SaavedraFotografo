<!-- src/app/components/chat-ia/chat-ia.component.html -->
<div class="chat-ia-window" [class.open]="mostrarChat">
  <div class="header">
    <div class="title">Chat IA - Lumi</div>
    <button type="button" (click)="toggleChat()">{{ mostrarChat ? '—' : '+' }}</button>
  </div>

  <div class="log">
    <!-- Mostramos SOLO mensajes de user/assistant -->
    <div *ngFor="let m of visibleMessages" class="msg" [class.user]="m.role === 'user'" [class.assistant]="m.role === 'assistant'">
      <div class="bubble">
        <pre>{{ m.content }}</pre>
      </div>
    </div>
  </div>

  <div class="input-row">
    <input
      type="text"
      [(ngModel)]="input"
      [disabled]="loading"
      placeholder="Pide ideas de sesión, analiza un cliente o escribe /modo ventas · /modo asesor · /reset"
      (keyup.enter)="send()"
    />
    <button type="button" (click)="send()" [disabled]="loading">➤</button>
  </div>
</div>
